// Generated by CoffeeScript 1.9.3
var Client, PasswordKeys;

Client = require("request-json").JsonClient;

PasswordKeys = (function() {
  function PasswordKeys() {
    var nodeEnv;
    this.client = new Client("http://localhost:9101/");
    this.name = process.env.NAME;
    this.token = process.env.TOKEN;
    nodeEnv = process.env.NODE_ENV;
    if (nodeEnv === "production" || nodeEnv === "test") {
      this.client.setBasicAuth(this.name, this.token);
    }
  }

  PasswordKeys.prototype.initializeKeys = function(pwd, callback) {
    return this.client.post("accounts/password/", {
      password: pwd
    }, function(err, res, body) {
      if (err) {
        return callback(err);
      } else {
        return callback();
      }
    });
  };

  PasswordKeys.prototype.updateKeys = function(pwd, callback) {
    return this.client.put("accounts/password/", {
      password: pwd
    }, function(err, res, body) {
      if (err) {
        return callback(err);
      } else {
        return callback();
      }
    });
  };

  PasswordKeys.prototype.resetKeys = function(callback) {
    return this.client.del("accounts/reset/", function(err, res, body) {
      if (err) {
        return callback(err);
      } else {
        return callback();
      }
    });
  };

  return PasswordKeys;

})();

module.exports = new PasswordKeys();
